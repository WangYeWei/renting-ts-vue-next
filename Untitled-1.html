<!--
 * @Autor: YeWei Wang
 * @Date: 2021-01-10 23:24:06
 * @WeChat: wj826036
 * @Motto: 求知若渴，虚心若愚
 * @Description: 
 * @LastEditTime: 2021-01-10 23:51:39
 * @Version: 1.0
 * @FilePath: \renting-ts-vue-next\Untitled-1.html
-->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="app">
    <div>
      <p>{{ name }}</p>
      <button @click="getName">姓名</button>
    </div>
    <div>
      <p>{{ age }}</p>
      <button @click="getAge">年龄</button>
    </div>


    <div>----</div>

    <component-b></component-b>
  </div>

  <script src="https://unpkg.com/vue@next"></script>
  <script>
    const componentB = {
      setup() {
        const person = {
          name: 'Kiko Mizuhara',
          age: 31
        }

        return {
          ...useName(person),
          ...useAge(person)
        }
      },
      template: `
        <div>
          <p>{{ name }}</p>
          <button @click="getName">姓名</button>
        </div>
        <div>
          <p>{{ age }}</p>
          <button @click="getAge">年龄</button>
        </div>
      `
    }

    const component = {
      setup() {
        const person = {
          name: 'WangYewei',
          age: 20
        }
        return {
          ...useName(person),
          ...useAge(person)
        }
      },
      components: {
        componentB
      }
    }

    function useName(person) {
      const name = Vue.ref('')
      const getName = () => {
        name.value = person.name
      }
      return {
        name,
        getName
      }
    }

    function useAge(person) {
      const age = Vue.ref('')
      const getAge = () => {
        age.value = person.age
      }
      return {
        age,
        getAge
      }
    }
    const app = Vue.createApp(component)
    app.mount('#app')
  </script>
</body>

</html>